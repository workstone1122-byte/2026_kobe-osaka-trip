<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>旅遊APP - 主畫面</title>

    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        .menu {
            margin-top: 20px;
        }

        .menu a {
            display: block;
            margin: 10px 0;
            font-size: 20px;
            color: #0066cc;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h2>旅遊APP 主畫面</h2>

    <p id="userInfo">載入中...</p>

    <button id="logoutBtn">登出</button>

    <div class="menu">
        <h3>MVP 功能選單</h3>
        <a href="#">查看行程表（未完成）</a>
        <a href="#">景點查詢（未完成）</a>
        <a href="#">交通建議（未完成）</a>
        <a href="#">注意事項（未完成）</a>
    </div>

    <script type="module">
        import { app } from "./firebase-config.js";
        import {
            getAuth,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

        const auth = getAuth(app);

        // ✔ 判斷是否登入
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                // 未登入 → 返回 login.html
                window.location.href = "login.html";
                return;
            }

            document.getElementById("userInfo").innerText =
                "已登入：" + user.email;
        });

        // ✔ 登出
        document.getElementById("logoutBtn").addEventListener("click", async () => {
            await signOut(auth);
            window.location.href = "login.html";
        });
    </script>
</body>
</html>
